<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>3D Secure Confirmation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 100px;
        }

        #status {
            font-size: 1.2rem;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <h1>Processing 3D Secure Payment...</h1>
    <div id="status">Please wait while we confirm your payment.</div>

    <input id="bearerToken"></div>
    <script>
        const bearerToken = document.getElementById('bearerToken').value === '' ? 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlJUVXlSVVV4T0VOQ1JqTkNNakl4TWpjMU1EVTBNalJDTURkRk5rWTFNekU0TkRJNVFUZzJNQSJ9.eyJodHRwczovL2syLXFhLWV1MS5uM28uY2xvdWQvYXBwX21ldGFkYXRhIjp7InN1YnNjcmlwdGlvbnMiOlt7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDEtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ik4zTyBMdGQiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAwMi0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiQ2FyZSBDb21wYXNzIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDMtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkRldiBTdWJzY3JpcHRpb24gMyIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDA0LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTYWxtYW4gWmFoaWQgTGF0aWYiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAwNi0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTWFuY2hlc3RlciBDaXR5IENoYXJpdHkgQ2x1YiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDEzLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhai1EZXYiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2NS0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTWVyY3kgUmVsaWVmIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjYtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlNhbGFtIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjctMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkFjdGlvbiBGb3IgSHVtYW5pdHkiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2OC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiWmFpbWFoIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjktMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ikdsb2JhbCBSYWhtYWggRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDZhLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJHbG9iYWwgUmVsaWVmIFRydXN0IiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNmItMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlJFQUQgRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDZlLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJNdXNsaW0gSGFuZHMgVUsiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA3MC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiQWN0aW9uIGZvciBIdW1hbml0eSBDYW5hZGEiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA3My0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTXVzbGltIEhhbmRzIEZyYW5jZSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDc1LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJNdXNsaW0gSGFuZHMgU291dGggQWZyaWNhIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwN2EtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkFsIE1hcmlmYWggRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMzIwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhaiBVciBSZWhtYW4iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMWY0MC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2lyYWogVXIgUmFobWFuLU5ldyIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDE1ZjkwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhai1TYWxhbSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn1dfSwiaHR0cHM6Ly9rMi1xYS1ldTEubjNvLmNsb3VkL3VzZXJpbmZvIjp7Il9pZCI6IjlkZjk0ZjU4MzY2N2EzNDdkZDJhN2JjYjBmNTZmYjM1IiwiY2xpZW50SUQiOiJXM1dFeFJiZWJkZjhobmsxYXEzYVNsMEtRaEtTRHFGeiIsImNyZWF0ZWRfYXQiOiIyMDE5LTExLTI4VDA4OjE2OjAyLjA4M1oiLCJlbWFpbCI6InNpcmFqLnVycmFobWFuQG4zby5sdGQiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaWRlbnRpdGllcyI6W3siY29ubmVjdGlvbiI6IlVzZXJuYW1lLVBhc3N3b3JkLUF1dGhlbnRpY2F0aW9uIiwicHJvdmlkZXIiOiJhdXRoMCIsInVzZXJfaWQiOiI1ZGRmODI0MmEzOGVhYjBlMjEyZGE0YjYiLCJpc1NvY2lhbCI6ZmFsc2V9XSwibmFtZSI6IlNpcmFqIFVyUmFobWFuIiwibmlja25hbWUiOiJzaXJhai51cnJhaG1hbiIsInBpY3R1cmUiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8zODkwODEyOTM2ZDhhZmQzOWI5NGI3ODY4ZWQ1YmYyMT9zPTQ4MCZyPXBnJmQ9aHR0cHMlM0ElMkYlMkZjZG4uYXV0aDAuY29tJTJGYXZhdGFycyUyRnNpLnBuZyIsInVwZGF0ZWRfYXQiOiIyMDI1LTEyLTIyVDA4OjMyOjA0LjUyM1oiLCJ1c2VyX2lkIjoiYXV0aDB8NWRkZjgyNDJhMzhlYWIwZTIxMmRhNGI2IiwibGFzdF9wYXNzd29yZF9yZXNldCI6IjIwMjMtMDYtMjFUMTI6NDc6MTIuNDU3WiIsInVzZXJfbWV0YWRhdGEiOnt9LCJmYW1pbHlfbmFtZSI6IlVyIFJhaG1hbiIsImdpdmVuX25hbWUiOiJzaXJhaiIsImdsb2JhbF9jbGllbnRfaWQiOiJEMXZ6blBGeHdyWjVKcEY0TmNEUm5PU0Q2bmZCODd0SCIsImFwcF9tZXRhZGF0YSI6eyJzdWJzY3JpcHRpb25zIjpbeyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDAxLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJOM08gTHRkIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDItMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkNhcmUgQ29tcGFzcyIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDAzLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJEZXYgU3Vic2NyaXB0aW9uIDMiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAwNC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2FsbWFuIFphaGlkIExhdGlmIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDYtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ik1hbmNoZXN0ZXIgQ2l0eSBDaGFyaXR5IENsdWIiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAxMy0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2lyYWotRGV2IiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjUtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ik1lcmN5IFJlbGllZiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDY2LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTYWxhbSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDY3LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJBY3Rpb24gRm9yIEh1bWFuaXR5IiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjgtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlphaW1haCIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDY5LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJHbG9iYWwgUmFobWFoIEZvdW5kYXRpb24iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2YS0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiR2xvYmFsIFJlbGllZiBUcnVzdCIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDZiLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJSRUFEIEZvdW5kYXRpb24iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2ZS0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTXVzbGltIEhhbmRzIFVLIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNzAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkFjdGlvbiBmb3IgSHVtYW5pdHkgQ2FuYWRhIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNzMtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ik11c2xpbSBIYW5kcyBGcmFuY2UiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA3NS0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTXVzbGltIEhhbmRzIFNvdXRoIEFmcmljYSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDdhLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJBbCBNYXJpZmFoIEZvdW5kYXRpb24iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDMyMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2lyYWogVXIgUmVobWFuIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDFmNDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlNpcmFqIFVyIFJhaG1hbi1OZXciLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAxNWY5MC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2lyYWotU2FsYW0iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9XX0sInN1YnNjcmlwdGlvbnMiOlt7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDEtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ik4zTyBMdGQiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAwMi0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiQ2FyZSBDb21wYXNzIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwMDMtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkRldiBTdWJzY3JpcHRpb24gMyIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDA0LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTYWxtYW4gWmFoaWQgTGF0aWYiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDAwNi0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTWFuY2hlc3RlciBDaXR5IENoYXJpdHkgQ2x1YiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDEzLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhai1EZXYiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2NS0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTWVyY3kgUmVsaWVmIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjYtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlNhbGFtIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjctMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkFjdGlvbiBGb3IgSHVtYW5pdHkiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA2OC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiWmFpbWFoIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNjktMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6Ikdsb2JhbCBSYWhtYWggRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDZhLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJHbG9iYWwgUmVsaWVmIFRydXN0IiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwNmItMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IlJFQUQgRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDZlLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJNdXNsaW0gSGFuZHMgVUsiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA3MC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiQWN0aW9uIGZvciBIdW1hbml0eSBDYW5hZGEiLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMDA3My0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiTXVzbGltIEhhbmRzIEZyYW5jZSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMDc1LTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJNdXNsaW0gSGFuZHMgU291dGggQWZyaWNhIiwiYXBwbGljYXRpb24iOiJrMiIsImRhdGFSZWdpb24iOiJldTEifSx7InN1YnNjcmlwdGlvbklkIjoiMDAwMDAwN2EtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIiwic3Vic2NyaXB0aW9uTmFtZSI6IkFsIE1hcmlmYWggRm91bmRhdGlvbiIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDAwMzIwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhaiBVciBSZWhtYW4iLCJhcHBsaWNhdGlvbiI6ImsyIiwiZGF0YVJlZ2lvbiI6ImV1MSJ9LHsic3Vic2NyaXB0aW9uSWQiOiIwMDAwMWY0MC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAiLCJzdWJzY3JpcHRpb25OYW1lIjoiU2lyYWogVXIgUmFobWFuLU5ldyIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn0seyJzdWJzY3JpcHRpb25JZCI6IjAwMDE1ZjkwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsInN1YnNjcmlwdGlvbk5hbWUiOiJTaXJhai1TYWxhbSIsImFwcGxpY2F0aW9uIjoiazIiLCJkYXRhUmVnaW9uIjoiZXUxIn1dLCJwZXJzaXN0ZW50Ijp7fX0sImlzcyI6Imh0dHBzOi8vbG9naW4ubjNvLmNsb3VkLyIsInN1YiI6ImF1dGgwfDVkZGY4MjQyYTM4ZWFiMGUyMTJkYTRiNiIsImF1ZCI6WyJodHRwczovL24zby5sdGQva2FyYWtvcmFtIiwiaHR0cHM6Ly9uM28uZXUuYXV0aDAuY29tL3VzZXJpbmZvIl0sImlhdCI6MTc2Njc0Mjg0OSwiZXhwIjoxNzY2ODI5MjQ5LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIG9mZmxpbmVfYWNjZXNzIiwiYXpwIjoiVzNXRXhSYmViZGY4aG5rMWFxM2FTbDBLUWhLU0RxRnoifQ.jkXqKx3KwmMGaKjKuG0jc6osShg1Bz95gJMLWWky8lnI6tXpac99UktVsdo4dakN9pVxihJODKLdXX2TqvhRi1P3my8kuYkKOfQrhudn5p2DO-sP1tVos6pbGJQZqsegahua9srMfxaKDmlkeECN9byV1CIQ_6po9E35aw4-zovLQpgmMZU_VUjF1uIj9I7dF5NXCssTg92tzRGTDxB0WXUMbtuCd3yTA9DVPp4efGIHd-OkgF7cwFVyoNjOG8JvhnR4521N7kLICp1X6gO_JYXXEiRU-DNKqo3rBI3G6_mGXkBnsgf_d9rOWNduqceYn1R5BJvGdiPvIGojq8abuA'
            : '';

        async function confirmPayment() {
            const params = new URLSearchParams(window.location.search);

            const ref = params.get("REF");

            if (!ref) {
                document.getElementById("status").innerText = "Missing required parameters.";
                return;
            }

            try {

                const url = `http://localhost:25713/worldline/v1.0/payments/find`;

                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        'Authorization': bearerToken,
                        'accept': 'application/json',
                        'N3O-Ignore-Validation-Warnings': 'false',
                        'N3O-Subscription-Id': '00000006-0000-0000-0000-000000000000',
                    },
                    body: JSON.stringify({ "worldlinePaymentId": ref })
                });

                if (!response.ok) {
                    throw new Error(`Server returned ${response.status}`);
                }

                const result = await response.json();

                if (result.items[0].status === "paid") {
                    document.getElementById("status").innerText = `Payment successful! Thank you. ${JSON.stringify(result)}`;
                } else {
                    document.getElementById("status").innerText = `Payment failed: ${result}`;
                }

            } catch (error) {
                document.getElementById("status").innerText = "Error confirming payment. Please try again.";

                setTimeout(() => confirmPayment(), 1000); 
            }
        }

        // Trigger confirmation when page loads
        confirmPayment();
    </script>
</body>

</html>